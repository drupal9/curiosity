version: '3'

services:
  api:
    build:
      context: .
      dockerfile: ./docker/build/api/Dockerfile

    ports:
      - "5000:8080"

    volumes:
          - ./app:/var/www/app

  webapp:
      build:
        context: .
        dockerfile: ./docker/build/webapp/Dockerfile
      ports:
        - "8000:80"

      depends_on:
        - api

      volumes:
        - ./docker/etc/apache/webapp.conf:/etc/apache2/sites-enabled/000-default.conf:ro
        - ./webapp:/var/www